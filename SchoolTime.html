<!DOCTYPE html>
<html>
<head>
<link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Roboto+Mono&display=swap" rel="stylesheet">
<style>
body, select, button {
  font-family: 'Montserrat', sans-serif;
  text-align: center;
  font-size: 24px;
}
h1, br {font-size:128px;}
h2 {font-size: 32px;}
#bottomBar {
  background-color: black;
  color: white;
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100vw;
  text-align: left;
  padding: 8px;
}
input {
  width: 24px;
  height: 24px;
}
button {
  float: right;
  margin-right: 16px;
}
</style>
</head>
<body onload="load()">
<br>
<h1 id="time">Loading...</h1>
<h2 id="date">Loading...</h2>
<h2 id="period">Loading...</h2>
<h2 id="countdown">Loading...</h2>
<div id="bottomBar">
<label for="school">School:</label>
<select name="school" id="school">
  <option value="wood">Wood Intermediate</option>
  <option value="north">North High</option>
</select>
<label for="mono">Use Monospace Font?</label>
<input type="checkbox" id="mono" name="mono" value="mono">
<button type="button" onclick="applyButton()">Apply</button>
<button type="button" onclick="hideBar()">Hide Bar</button>
</div>
<script>
var selectedEvents;
const woodPeriods = [
{name: "School hasn't started yet.", time: new Date(2000, 1, 1, 0, 0, 0, 0)},
{name: "Passing Time", time: new Date(2000, 1, 1, 9, 0, 0, 0)},
{name: "Advisory", time: new Date(2000, 1, 1, 9, 10, 0, 0)},
{name: "Passing Time", time: new Date(2000, 1, 1, 9, 25, 0, 0)},
{name: "1st Period", time: new Date(2000, 1, 1, 9, 28, 0, 0)},
{name: "Passing Time", time: new Date(2000, 1, 1, 10, 12, 0, 0)},
{name: "2nd Period", time: new Date(2000, 1, 1, 10, 14, 0, 0)},
{name: "Passing Time", time: new Date(2000, 1, 1, 10, 57, 0, 0)},
{name: "Verkstad", time: new Date(2000, 1, 1, 11, 0, 0, 0)},
{name: "Passing Time", time: new Date(2000, 1, 1, 11, 30, 0, 0)},
{name: "3rd Period", time: new Date(2000, 1, 1, 11, 33, 0, 0)},
{name: "Passing Time", time: new Date(2000, 1, 1, 12, 16, 0, 0)},
{name: "4th Period", time: new Date(2000, 1, 1, 12, 19, 0, 0)},
{name: "Passing Time", time: new Date(2000, 1, 1, 13, 39, 0, 0)},
{name: "5th Period", time: new Date(2000, 1, 1, 13, 42, 0, 0)},
{name: "Passing Time", time: new Date(2000, 1, 1, 14, 26, 0, 0)},
{name: "6th Period", time: new Date(2000, 1, 1, 14, 29, 0, 0)},
{name: "Passing Time", time: new Date(2000, 1, 1, 15, 13, 0, 0)},
{name: "7th Period", time: new Date(2000, 1, 1, 15, 16, 0, 0)},
{name: "School has ended.", time: new Date(2000, 1, 1, 16, 0, 0, 0)}
];
const northBlocks = [
{name: "School hasn't started yet.", time: new Date(2000, 1, 1, 0, 0, 0, 0)},
{name: "Early Bird", time: new Date(2000, 1, 1, 7, 25, 0, 0)},
{name: "Passing Time", time: new Date(2000, 1, 1, 8, 25, 0, 0)},
{name: "Block 1", time: new Date(2000, 1, 1, 8, 35, 0, 0)},
{name: "Passing Time", time: new Date(2000, 1, 1, 9, 55, 0, 0)},
{name: "Block 2", time: new Date(2000, 1, 1, 10, 0, 0, 0)},
{name: "Passing Time", time: new Date(2000, 1, 1, 11, 20, 0, 0)},
{name: "Block 3", time: new Date(2000, 1, 1, 11, 25, 0, 0)},
{name: "Passing Time", time: new Date(2000, 1, 1, 13, 20, 0, 0)},
{name: "PAWS/Smart Block", time: new Date(2000, 1, 1, 13, 25, 0, 0)},
{name: "Passing Time", time: new Date(2000, 1, 1, 14, 0, 0, 0)},
{name: "Block 4", time: new Date(2000, 1, 1, 14, 5, 0, 0)},
{name: "School has ended.", time: new Date(2000, 1, 1, 15, 30, 0, 0)}
];
function load() {
  applySettings("wood", false);
  setTime();
}
function getCurrentEvent(events, time) {
  var found = false;
  for (var i = 0; i < events.length && !(found); i++) {
    if (events[i].time.getTime() > time.getTime()) {found = true};
  }
  return (i - 2);
}
function setTime() {
  var date = new Date();
  var timeNoDate = new Date();
  timeNoDate.setFullYear(2000);
  timeNoDate.setMonth(1);
  timeNoDate.setDate(1);
  const timeDifference = new Date(selectedEvents[getCurrentEvent(selectedEvents, timeNoDate) + 1].time - timeNoDate);
  var hour = date.getHours();
  var min = date.getMinutes();
  var sec = date.getSeconds();
  var year = date.getFullYear();
  var month = date.getMonth();
  var day = date.getDate();
  var ampm;
  if (hour >= 13) {ampm = "PM"} else {ampm = "AM"}
  hour = fixHour(hour);
  min = fixTime(min);
  sec = fixTime(sec);
  month = monthName(month);
  document.getElementById('time').innerHTML = hour + ":" + min + ":" + sec + " " + ampm;
  document.getElementById('date').innerHTML = month + " " + day + ", " + year;
  document.getElementById('period').innerHTML = woodPeriods[getCurrentEvent(selectedEvents, timeNoDate)].name;
  if (timeDifference.getHours() > 18) {
  document.getElementById('countdown').innerHTML = "Time until " + woodPeriods[getCurrentEvent(selectedEvents, timeNoDate) + 1].name + " - " + timeDifference.getHours() - 18 + ":" + timeDifference.getMinutes() + ":" + fixTime(timeDifference.getSeconds());
  }
  else {
  document.getElementById('countdown').innerHTML = "Time until " + selectedEvents[getCurrentEvent(selectedEvents, timeNoDate) + 1].name + " - " + timeDifference.getMinutes() + ":" + fixTime(timeDifference.getSeconds());
  }
  setTimeout(setTime, 250);
}
function fixTime(i) {
  if (i < 10) {i = "0" + i};
  return i;
}
function fixHour(i) {
  if (i >= 13) {i = i - 12}
  else if (i == 0) {i = 12};
  return i
}
function monthName(i) {
  if (i == 0) {i = "January"};
  if (i == 1) {i = "February"};
  if (i == 2) {i = "March"};
  if (i == 3) {i = "April"};
  if (i == 4) {i = "May"};
  if (i == 5) {i = "June"};
  if (i == 6) {i = "July"};
  if (i == 7) {i = "August"};
  if (i == 8) {i = "September"};
  if (i == 9) {i = "October"};
  if (i == 10) {i = "November"};
  if (i == 11) {i = "December"};
  return i;
}
function applySettings(school, mono) {
  if (school == "wood") {selectedEvents = woodPeriods}
  else if (school == "north") {selectedEvents = northBlocks};
  if (mono) {
    document.getElementById("time").style.fontFamily = "Roboto Mono, monospace";
    document.getElementById("date").style.fontFamily = "Roboto Mono, monospace";
    document.getElementById("period").style.fontFamily = "Roboto Mono, monospace";
    document.getElementById("countdown").style.fontFamily = "Roboto Mono, monospace";
  }
  else {
    document.getElementById("time").style.fontFamily = "Montserrat, sans-serif";
    document.getElementById("date").style.fontFamily = "Montserrat, sans-serif";
    document.getElementById("period").style.fontFamily = "Montserrat, sans-serif";
    document.getElementById("countdown").style.fontFamily = "Montserrat, sans-serif";
  }
}
function applyButton() {applySettings(document.getElementById("school").value, document.getElementById("mono").checked);}
</script>
</body>
</html>